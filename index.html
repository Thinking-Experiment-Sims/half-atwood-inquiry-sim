<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Half-Atwood Discovery Simulation | The Thinking Experiment</title>
    <link rel="icon" type="image/png" sizes="32x32" href="https://vladimirlopez.github.io/the-thinking-experiment/assets/favicon-32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="https://vladimirlopez.github.io/the-thinking-experiment/assets/favicon-16.png" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="bg-grid" aria-hidden="true"></div>

    <div class="shell">
      <header class="hero">
        <p class="kicker">On-Level Physics | Unit 6 Unbalanced Forces</p>
        <h1>Half-Atwood Machine Discovery Simulation</h1>
        <p class="subtitle">
          Investigate how a hanging mass pulls a block on a table, and how friction can stop or slow the system.
          Use it to build force diagrams, predict acceleration, and test claims before solving packet and exam-style problems.
        </p>
      </header>
      <section class="top-row">
        <button id="themeToggle" type="button" class="theme-toggle">Dark mode</button>
      </section>

      <main class="app-layout" aria-label="Half-Atwood simulation interface">
        <section class="panel narrow controls-panel">
          <h2>Controls</h2>
          <p class="hint">Positive direction: block right, hanging mass down.</p>

          <div class="controls-grid">
            <label>
              Table Mass (mₜ), kg
              <input id="massTable" type="number" min="0.2" max="2500" step="0.1" value="2.5" />
            </label>

            <label>
              Hanging Mass (mₕ), kg
              <input id="massHanging" type="number" min="0.1" max="500" step="0.1" value="1.2" />
            </label>

          </div>

          <label class="range-label">
            Initial Velocity v₀: <span id="initialVelocityValue">0.00 m/s</span>
            <input id="initialVelocity" type="range" min="-4" max="4" step="0.05" value="0" />
          </label>

          <div class="toggle-group">
            <label class="toggle-line">
              <input id="frictionEnabled" type="checkbox" checked />
              Include table friction
            </label>

            <label class="range-label">
              Coefficient μ: <span id="muValue">0.20</span>
              <input id="mu" type="range" min="0" max="1" step="0.01" value="0.2" />
            </label>

            <label class="toggle-line">
              <input id="showForces" type="checkbox" checked />
              Show force arrows
            </label>
          </div>

          <div class="button-row">
            <button id="startBtn" class="primary" type="button">Start</button>
            <button id="pauseBtn" type="button">Pause</button>
            <button id="resetBtn" type="button">Reset</button>
            <button id="recordBtn" type="button">Record Trial</button>
            <button id="clearBtn" type="button">Clear Table</button>
          </div>

          <p id="statusText" class="status" aria-live="polite"></p>

          <div class="preset-box">
            <h3>Quick Scenarios</h3>
            <div class="button-row compact">
              <button data-preset="baseline" class="ghost" type="button">Frictionless Baseline</button>
              <button data-preset="packet" class="ghost" type="button">Packet Style</button>
              <button data-preset="cliff" class="ghost" type="button">Car + Rock Analog</button>
            </div>
          </div>
        </section>

        <section class="panel wide visual-panel">
          <div class="panel-head">
            <h2>Half-Atwood View</h2>
            <p class="info-line">Track rope motion, velocity direction, and friction effects in real time.</p>
          </div>

          <canvas
            id="simCanvas"
            class="sim-canvas sim-view"
            width="980"
            height="520"
            role="img"
            aria-label="Half-Atwood machine with a block on a table connected over a pulley to a hanging mass"
          ></canvas>

          <dl class="metrics-grid" aria-label="Live simulation readouts">
            <div>
              <dt>Acceleration (instant)</dt>
              <dd id="accelReadout">--</dd>
            </div>
            <div>
              <dt>Acceleration (from rest)</dt>
              <dd id="restAccelReadout">--</dd>
            </div>
            <div>
              <dt>Tension</dt>
              <dd id="tensionReadout">--</dd>
            </div>
            <div>
              <dt>Friction Force</dt>
              <dd id="frictionReadout">--</dd>
            </div>
            <div>
              <dt>Net Force</dt>
              <dd id="netReadout">--</dd>
            </div>
            <div>
              <dt>Velocity</dt>
              <dd id="velocityReadout">--</dd>
            </div>
            <div>
              <dt>Displacement</dt>
              <dd id="displacementReadout">--</dd>
            </div>
            <div>
              <dt>Time</dt>
              <dd id="timeReadout">--</dd>
            </div>
          </dl>
        </section>

        <section class="panel full">
          <div class="tab-nav" role="tablist" aria-label="Instruction tabs">
            <button id="discoveryTabBtn" class="tab-btn active" type="button" data-tab="discovery" role="tab" aria-selected="true">Guided Discovery</button>
            <button id="theoryTabBtn" class="tab-btn" type="button" data-tab="theory" role="tab" aria-selected="false">Theory Concepts</button>
          </div>

          <div id="discoveryTab" class="tab-panel active" role="tabpanel" aria-labelledby="discoveryTabBtn">
            <h2>Discovery Prompts (Aligned to Unit 6)</h2>
            <details open>
              <summary>1) Start frictionless to build your reference model</summary>
              <p>Set friction OFF, start from rest, and compare your measured acceleration to your equation for a two-mass system.</p>
              <p>Question: How does increasing mₕ change acceleration when mₜ stays fixed?</p>
            </details>
            <details>
              <summary>2) Add friction and find when motion stops</summary>
              <p>Turn friction ON and slowly increase μ while masses stay fixed.</p>
              <p>Question: At what point does static friction hold the system at rest? Explain with net-force reasoning.</p>
            </details>
            <details>
              <summary>3) Try a packet-style context</summary>
              <p>Use <strong>Packet Style</strong> preset, then estimate time to move 2.0 m from rest and compare with the simulation.</p>
              <p>Question: Which force changed from the frictionless run, and how did that change acceleration?</p>
            </details>
            <details>
              <summary>4) Analyze an exam-style claim</summary>
              <p>Give the system an initial velocity opposite the acceleration direction.</p>
              <p>Question: Can velocity and acceleration point opposite ways at the same time? Use evidence from the run.</p>
            </details>
          </div>

          <div id="theoryTab" class="tab-panel" role="tabpanel" aria-labelledby="theoryTabBtn">
            <h2>Half-Atwood Model Used Here</h2>
            <p>Sign convention: right/down is positive.</p>
            <p>
              Treat both masses together as one system. The motion of the system depends on the
              net external force compared to the total mass of the system.
            </p>
            <p>
              Friction changes the net external force on the system. When friction is large enough,
              the system can stay at rest.
            </p>
            <p>
              Use the simulation to identify which forces are external to the full two-object system,
              then connect your observations to acceleration.
            </p>
            <p class="hint">Gravity is fixed at 10 m/s² to match your Unit 6 exam convention.</p>
          </div>
        </section>

        <section class="panel full">
          <div class="panel-head">
            <h2>Recorded Trials</h2>
            <p class="info-line">Capture runs to compare frictionless and friction cases during class discussion.</p>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>#</th>
                  <th>mₜ (kg)</th>
                  <th>mₕ (kg)</th>
                  <th>μ</th>
                  <th>a from rest (m/s²)</th>
                  <th>T (N)</th>
                  <th>Result</th>
                </tr>
              </thead>
              <tbody id="trialTableBody">
                <tr>
                  <td colspan="7">No trials yet.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>

    <script type="module" src="./src/halfAtwoodApp.js"></script>
  </body>
</html>
